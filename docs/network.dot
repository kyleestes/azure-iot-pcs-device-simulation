digraph {
    apigateway[label="API Gateway\nhttps://apigateway-svc:443"]
    webui1[label="Web UI\nhttp://webui-svc:80"]
    devicesimulation1[label="Device Simulation\nhttp://devicesimulation-svc:9003"]
    config1[label="Config\nhttp://config-svc:9005"]
    diagnostics1[label="Diagnostics\nhttp://diagnostics-svc:9006"]
    apigateway -> devicesimulation1[label="/devicesimulation-svc/"]
    apigateway -> diagnostics1[label="/diagnostics-svc/"]
    apigateway -> config1[label="/config-svc/"]
    apigateway -> webui1[label="/"]

    reverseproxy[label="Reverse Proxy\nhttp://reverseproxy:10080\nhttps://reverseproxy:10443"]
    webui2[label="Web UI\nhttp://webui:10080"]
    auth[label="Auth\nhttp://auth:9001"]
    iothubmanager[label="IoT Hub Manager\nhttp://iothubmanager:9002"]
    devicesimulation2[label="Device Simulation\nhttp://devicesimulation:9003"]
    telemetry[label="Telemetry\nhttp://telemetry:9004"]
    config2[label="Config\nhttp://config:9005"]
    diagnostics2[label="Diagnostics\nhttp://diagnostics:9006"]
    reverseproxy -> webui2[label="/"]
    reverseproxy -> auth[label="/auth/"]
    reverseproxy -> iothubmanager[label="/iothubmanager/"]
    reverseproxy -> devicesimulation2[label="/devicesimulation/"]
    reverseproxy -> telemetry[label="/telemetry/"]
    reverseproxy -> config2[label="/config/"]
    reverseproxy -> diagnostics2[label="/diagnostics/"]
}